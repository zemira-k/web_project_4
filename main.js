!function(){"use strict";var e={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},t=document.querySelector(".popup_type_edit"),n=document.querySelector(".popup_type_add"),r=document.querySelector(".popup_type_edit-avatar"),o=document.querySelector(".profile__editbutton_type_avatar"),i=document.querySelector(".profile__editbutton_type_data"),a=document.querySelector(".profile__big-rectangle"),u=document.querySelector(".form__input_type_name"),c=document.querySelector(".form__input_type_about");function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(e,t){return fetch(e,t).then((function(e){return e.ok?e.json():Promise.reject(e.statusText)}))},f=new(function(){function e(t){var n=t.baseUrl,r=t.options;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=n,this._options=r}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return s("".concat(this._url,"/cards"),{headers:this._options})}},{key:"getUserInfo",value:function(){return s("".concat(this._url,"/users/me"),{headers:this._options})}},{key:"editProfile",value:function(e){return s("".concat(this._url,"/users/me"),{headers:this._options,method:"PATCH",body:JSON.stringify({name:e.formName,about:e.formAbout})})}},{key:"addCard",value:function(e){return s("".concat(this._url,"/cards"),{headers:this._options,method:"POST",body:JSON.stringify(e)})}},{key:"deleteCard",value:function(e){return s("".concat(this._url,"/cards/").concat(e),{headers:this._options,method:"DELETE"})}},{key:"addLike",value:function(e){return s("".concat(this._url,"/cards/likes/").concat(e),{headers:this._options,method:"PUT"})}},{key:"deleteLike",value:function(e){return s("".concat(this._url,"/cards/likes/").concat(e),{headers:this._options,method:"DELETE"})}},{key:"updateProfileImage",value:function(e){return s("".concat(this._url,"/users/me/avatar"),{headers:this._options,method:"PATCH",body:JSON.stringify({avatar:e})})}}])&&l(t.prototype,n),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",options:{authorization:"f0ace597-b017-4eaf-8da3-94e369745d83","Content-Type":"application/json"}});function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,n,r){var o=t.data,i=t.handleCardClick,a=t.handleLikeClick,u=t.handleDeleteCard;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=o.name,this._link=o.link,this._id=o._id,this._userId=r,this._ownerId=o.owner._id,this._likes=o.likes,this._cardSelector=n,this._handleCardClick=i,this._handleLikeClick=a,this._handleDeleteCard=u}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__name-heart").addEventListener("click",(function(){return e._handleLikeClick(e._id)})),this._element.querySelector(".element__btn_type_image").addEventListener("click",(function(){return e._handleCardClick()})),this._element.querySelector(".element__btn_type_trash").addEventListener("click",(function(){return e._handleDeleteCard(e._id)}))}},{key:"_renderLikes",value:function(){this._element.querySelector(".element__name-number").textContent=this._likes.length,this.isLiked()?this._element.querySelector(".element__name-heart").classList.add("element__name-heart_type_black"):this._element.querySelector(".element__name-heart").classList.remove("element__name-heart_type_black")}},{key:"removeCard",value:function(){this._ownerId===this._userId&&(this._element.remove(),this._element=null)}},{key:"likeCard",value:function(e){this._likes=e,this._renderLikes()}},{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}},{key:"getCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._ownerId!==this._userId&&(this._element.querySelector(".element__trash").style.display="none"),this._element.querySelector(".element__item").src=this._link,this._element.querySelector(".element__item").alt=this._name,this._element.querySelector(".element__name-text").textContent=this._name,this._renderLikes(),this._element}}])&&p(t.prototype,n),e}();function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_(this,"_showInputError",(function(e){var t=r._settings,n=t.inputErrorClass,o=t.errorClass,i=e.validationMessage,a=r._formElement.querySelector("#".concat(e.id,"-error"));a.textContent=i,e.classList.add(n),a.classList.add(o)})),_(this,"_hideInputError",(function(e){var t=r._settings,n=t.inputErrorClass,o=t.errorClass;e.classList.remove(n);var i=r._formElement.querySelector("#".concat(e.id,"-error"));i.classList.remove(o),i.textContent=""})),_(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e)})),_(this,"_toggleButtonState",(function(){var e=r._settings.inactiveButtonClass;r._inputList.every((function(e){return e.validity.valid}))?(r._buttonElement.disabled=!1,r._buttonElement.classList.remove(e)):(r._buttonElement.disabled="disabled",r._buttonElement.classList.add(e))})),_(this,"resetValidation",(function(){r._inputList.forEach((function(e){r._hideInputError(e)})),r._toggleButtonState()})),_(this,"enableValidation",(function(){r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r._toggleButtonState()}))}))})),this._settings=t,this._formElement=n,this._submitButtonSelector=t.submitButtonSelector,this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputSelector=t.inputSelector,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector))};function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._cardsContainer=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){e.forEach(this._renderer)}},{key:"addItem",value:function(e){this._cardsContainer.append(e)}}])&&y(t.prototype,n),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),b(this,"_handleClickPopupOverlayClose",(function(e){e.target===n._popupElement&&n.close()})),this._popupElement=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("click",this._handleClickPopupOverlayClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("click",this._handleClickPopupOverlayClose)}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("popup__close")&&e.close()}))}}])&&v(t.prototype,n),e}();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},w(e,t,n||e)}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function C(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(o){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return C(this,e)});function a(e){var t,n=e.popupSelector,r=e.submitHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._submitHandler=r,t._form=t._popupElement.querySelector(".form"),t._inputs=Array.from(t._form.querySelectorAll(".form__input")),t._formButton=t._popupElement.querySelector(".form__button"),t}return t=a,(n=[{key:"renderLoading",value:function(e){this._formButton.textContent=e?"saving...":this._formButton.value}},{key:"_getInputValues",value:function(){var e=this;return this._inputValues={},this._inputs.forEach((function(t){return e._inputValues[t.name]=t.value})),this._inputValues}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("submit",(function(t){t.preventDefault(),e.renderLoading(!0),e._submitHandler(e._getInputValues())})),w(L(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){this._form.reset(),w(L(a.prototype),"close",this).call(this)}}])&&E(t.prototype,n),a}(g);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t),this._job=document.querySelector(n),this._avatar=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,job:this._job.textContent}}},{key:"setUserInfo",value:function(e){var t=e.formName,n=e.formAbout,r=e.formLink;this._name.textContent=t,this._job.textContent=n,this._avatar.style.backgroundImage="url(".concat(r,")")}}])&&j(t.prototype,n),e}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},R(e,t,n||e)}function T(e,t){return T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},T(e,t)}function x(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return x(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._imageElement=t._popupElement.querySelector(".popup__image"),t._captionElement=t._popupElement.querySelector(".popup__caption"),t}return t=a,(n=[{key:"open",value:function(e){this._imageElement.src=e.link,this._imageElement.alt=e.name,this._captionElement.textContent=e.name,R(A(a.prototype),"open",this).call(this)}}])&&q(t.prototype,n),a}(g);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},H(e,t,n||e)}function N(e,t){return N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},N(e,t)}function J(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(r);if(o){var n=M(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return J(this,e)});function a(){return D(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"setAction",value:function(e){this._submitHandler=e}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("submit",(function(t){t.preventDefault(),e._submitHandler()})),H(M(a.prototype),"setEventListeners",this).call(this)}}])&&U(t.prototype,n),a}(g);function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F,G=new h(e,r),K=new h(e,t),Q=new h(e,n),W=new P(".profile__name",".profile__task",".profile__avatar");Promise.all([f.getInitialCards(),f.getUserInfo()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];F=i._id,X.renderItems(o),W.setUserInfo({formName:i.name,formAbout:i.about,formLink:i.avatar})})).catch((function(e){return console.log("Error: ".concat(e))}));var X=new m({renderer:ne},".elements"),Y=new B(".popup_type_image"),Z=new z(".popup_type_delete-card"),ee=new O({popupSelector:".popup_type_edit",submitHandler:function(e){f.editProfile(e).then((function(e){W.setUserInfo({formName:e.name,formAbout:e.about,formLink:e.avatar})})).then((function(){ee.close()})).catch((function(e){return console.log("Error: ".concat(e))})).finally((function(){ee.renderLoading(!1)}))}}),te=new O({popupSelector:".popup_type_edit-avatar",submitHandler:function(e){f.updateProfileImage(e.avatarImageLink).then((function(e){W.setUserInfo({formName:e.name,formAbout:e.about,formLink:e.avatar})})).then((function(){te.close()})).catch((function(e){return console.log("Error: ".concat(e))})).finally((function(){te.renderLoading(!1)}))}});function ne(e){var t=new d({data:e,handleCardClick:function(){Y.open(e)},handleLikeClick:function(e){t.isLiked()?f.deleteLike(e).then((function(e){t.likeCard(e.likes)})).catch((function(e){return console.log("Error: ".concat(e))})):f.addLike(e).then((function(e){t.likeCard(e.likes)})).catch((function(e){return console.log("Error: ".concat(e))}))},handleDeleteCard:function(e){Z.open(),Z.setAction((function(){f.deleteCard(e).then((function(e){t.removeCard(),Z.close()})).catch((function(e){return console.log("Error: ".concat(e))}))}))}},".card-template",F);X.addItem(t.getCard())}var re=new O({popupSelector:".popup_type_add",submitHandler:function(e){f.addCard({name:e.formTitle,link:e.formLink}).then((function(e){ne(e),re.close()})).then((function(){re.close()})).catch((function(e){return console.log("Error: ".concat(e))})).finally((function(){re.renderLoading(!1)}))}});a.addEventListener("click",(function(){Q.resetValidation(),re.open()})),i.addEventListener("click",(function(){var e;e=W.getUserInfo(),u.value=e.name,c.value=e.job,K.resetValidation(),ee.open()})),o.addEventListener("click",(function(){G.resetValidation(),te.open()})),K.enableValidation(),Q.enableValidation(),G.enableValidation(),ee.setEventListeners(),te.setEventListeners(),Y.setEventListeners(),re.setEventListeners(),Z.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDLEdBQUcsT0FBSUMsUUFBUUMsSUFBUixpQkFBc0JGLFlBSTFDLGlCQUNBM0gsR0FFRnVILEVBQU13QixRQUFRUixFQUFLUyxXQUdyQixJQUFNQyxHQUFXLElBQUkvRCxFQUFjLENBQ2pDVixjQUFlLGtCQUNmVyxjQUFlLFNBQUNqRyxHQUNkUCxFQUFJZCxRQUFRLENBQUUwQixLQUFNTCxFQUFLZ0ssVUFBVzVJLEtBQU1wQixFQUFLcUgsV0FDOUNuSSxNQUFLLFNBQUNDLEdBQ0x5SixHQUFXekosR0FDWDRLLEdBQVN0RSxXQUVWdkcsTUFBSyxXQUNKNkssR0FBU3RFLFdBRVYrQyxPQUFNLFNBQUFDLEdBQUcsT0FBSUMsUUFBUUMsSUFBUixpQkFBc0JGLE9BQ25DUSxTQUFRLFdBQ1BjLEdBQVNwRCxlQUFjLFNBTTdCaEksRUFBUXVELGlCQUFpQixTQUFTLFdBQ2hDNEYsRUFBcUJtQyxrQkFDckJGLEdBQVNULFVBV1g1SyxFQUFld0QsaUJBQWlCLFNBQVMsV0FQekMsSUFDUWxDLEVBQUFBLEVBQU8rSCxFQUFLRyxjQUNsQnRKLEVBQVUySCxNQUFRdkcsRUFBS0ssS0FDdkJ4QixFQUFXMEgsTUFBUXZHLEVBQUtvSCxJQU14QlMsRUFBa0JvQyxrQkFDbEJsQixHQUFVTyxVQUlaN0ssRUFBaUJ5RCxpQkFBaUIsU0FBUyxXQUN6QzBGLEVBQXdCcUMsa0JBQ3hCZixHQUEwQkksVUFJNUJ6QixFQUFrQnFDLG1CQUNsQnBDLEVBQXFCb0MsbUJBQ3JCdEMsRUFBd0JzQyxtQkFHeEJuQixHQUFVb0Isb0JBQ1ZqQixHQUEwQmlCLG9CQUMxQnRCLEVBQWNzQixvQkFDZEosR0FBU0ksb0JBQ1RyQixFQUFhcUIsb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbn07XHJcblxyXG4vLyBwb3B1cCBjb250YWluZXJzXHJcbmV4cG9ydCBjb25zdCBwb3B1cFR5cGVFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2VkaXRcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFR5cGVBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfYWRkXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBUeXBlRWRpdEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9lZGl0LWF2YXRhclwiKTtcclxuXHJcbi8vIG9wZW4gYnV0dG9uc1xyXG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbkF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdGJ1dHRvbl90eXBlX2F2YXRhclwiKTtcclxuZXhwb3J0IGNvbnN0IGVkaXRCdXR0b25EYXRhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0YnV0dG9uX3R5cGVfZGF0YVwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2JpZy1yZWN0YW5nbGVcIik7XHJcblxyXG4vLyBpbnB1dHNcclxuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgaW5wdXRBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9hYm91dFwiKTsiLCJjb25zdCBjb3N0dW1GZXRjaCA9ICh1cmwsIG9wdGlvbnMpID0+XHJcbiAgZmV0Y2godXJsLCBvcHRpb25zKVxyXG4gICAgLnRoZW4oKHJlcykgPT4gKHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzVGV4dCkpKSAgICBcclxuXHJcbmNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBvcHRpb25zIH0pIHtcclxuICAgIHRoaXMuX3VybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBjb3N0dW1GZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBjb3N0dW1GZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlZGl0UHJvZmlsZShkYXRhKSB7XHJcbiAgICByZXR1cm4gY29zdHVtRmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucyxcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBkYXRhLmZvcm1OYW1lLFxyXG4gICAgICAgIGFib3V0OiBkYXRhLmZvcm1BYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoZGF0YSkge1xyXG4gICAgcmV0dXJuIGNvc3R1bUZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX29wdGlvbnMsXHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGlkKSB7XHJcbiAgICByZXR1cm4gY29zdHVtRmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucyxcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRMaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gY29zdHVtRmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy9saWtlcy8ke2lkfWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucyxcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVMaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gY29zdHVtRmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy9saWtlcy8ke2lkfWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucyxcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcm9maWxlSW1hZ2UoZGF0YSkge1xyXG4gICAgcmV0dXJuIGNvc3R1bUZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLFxyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe2F2YXRhcjogZGF0YX0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXHJcbiAgb3B0aW9uczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJmMGFjZTU5Ny1iMDE3LTRlYWYtOGRhMy05NGUzNjk3NDVkODNcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pOyIsImV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVMaWtlQ2xpY2ssIGhhbmRsZURlbGV0ZUNhcmQgfSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIHVzZXJJZFxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgLy8gbGlzdGVuZXJzXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19uYW1lLWhlYXJ0XCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMuX2lkKSk7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2J0bl90eXBlX2ltYWdlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZENsaWNrKCkpO1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19idG5fdHlwZV90cmFzaFwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQodGhpcy5faWQpKTtcclxuICB9XHJcblxyXG4gIF9yZW5kZXJMaWtlcygpIHsgICAgXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbmFtZS1udW1iZXJcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICAgIGlmICh0aGlzLmlzTGlrZWQoKSkgeyAgIFxyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19uYW1lLWhlYXJ0XCIpXHJcbiAgICAgIC5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudF9fbmFtZS1oZWFydF90eXBlX2JsYWNrXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19uYW1lLWhlYXJ0XCIpXHJcbiAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoXCJlbGVtZW50X19uYW1lLWhlYXJ0X3R5cGVfYmxhY2tcIik7XHJcbiAgICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmQoKSB7XHJcbiAgICBpZiAodGhpcy5fb3duZXJJZCA9PT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGlrZUNhcmQobmV3TGlrZXMpIHtcclxuICAgIHRoaXMuX2xpa2VzID0gbmV3TGlrZXM7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpOyAgICBcclxuICB9XHJcblxyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgocGVyc29uKSA9PiBwZXJzb24uX2lkID09PSB0aGlzLl91c2VySWQpO1xyXG4gIH1cclxuXHJcbiAgLy8gY3JlYXRlIGNhcmQgZWxlbWVudFxyXG4gIGdldENhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICBpZiAodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190cmFzaFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9ICAgIFxyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2l0ZW1cIikuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pdGVtXCIpLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbmFtZS10ZXh0XCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTsgICAgXHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpOyAgICBcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufSIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybSkge1xyXG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBzaG93IElucHV0IEVycm9yXHJcbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG4gICAgY29uc3QgZXJyb3IgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvcjtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChlcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICAvLyBoaWRlIElucHV0IEVycm9yXHJcbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MgfSA9IHRoaXMuX3NldHRpbmdzO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9O1xyXG5cclxuICAvLyBjaGVjayBJbnB1dCBWYWxpZGl0eVxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyB0b2dnbGUgQnV0dG9uIFN0YXRlXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgeyBpbmFjdGl2ZUJ1dHRvbkNsYXNzIH0gPSB0aGlzLl9zZXR0aW5ncztcclxuICAgIGNvbnN0IGlzRm9ybVZhbGlkID0gdGhpcy5faW5wdXRMaXN0LmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQpO1xyXG4gICAgaWYgKGlzRm9ybVZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IFwiZGlzYWJsZWRcIjtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIHJlc2V0IHZhbGlkYXRpb25cclxuICByZXNldFZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfTtcclxuXHJcbiAgLy8gcnVuIHZhbGlkYXRpb25cclxuICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHsgICAgXHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7ICAgIFxyXG4gICAgaXRlbXMuZm9yRWFjaCh0aGlzLl9yZW5kZXJlcilcclxuICB9OyBcclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7ICAgIFxyXG4gICAgdGhpcy5fY2FyZHNDb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufSIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTsgICAgXHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tQb3B1cE92ZXJsYXlDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsaWNrUG9wdXBPdmVybGF5Q2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVDbGlja1BvcHVwT3ZlcmxheUNsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL3BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEhhbmRsZXIgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gc3VibWl0SGFuZGxlcjtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRzID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIikpO1xyXG4gICAgdGhpcy5fZm9ybUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2J1dHRvblwiKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX2Zvcm1CdXR0b24udGV4dENvbnRlbnQgPSBcInNhdmluZy4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZm9ybUJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX2Zvcm1CdXR0b24udmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xyXG5cclxuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKFxyXG4gICAgICAoaW5wdXQpID0+ICh0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKVxyXG4gICAgKTtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG4gIFxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fam9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkgeyAgICBcclxuICAgIHJldHVybiB7IG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsIGpvYjogdGhpcy5fam9iLnRleHRDb250ZW50IH07ICAgIFxyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oe2Zvcm1OYW1lLCBmb3JtQWJvdXQsIGZvcm1MaW5rfSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGZvcm1OYW1lO1xyXG4gICAgdGhpcy5fam9iLnRleHRDb250ZW50ID0gZm9ybUFib3V0OyAgICBcclxuICAgIHRoaXMuX2F2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7Zm9ybUxpbmt9KWA7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9wb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkgeyAgICBcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcblxyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vcG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgc2V0QWN0aW9uKGFjdGlvbikge1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IGFjdGlvbjtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKCk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgY29uZmlnLFxyXG4gIHBvcHVwVHlwZUVkaXQsXHJcbiAgcG9wdXBUeXBlQWRkLFxyXG4gIHBvcHVwVHlwZUVkaXRBdmF0YXIsICBcclxuICBlZGl0QnV0dG9uRGF0YSxcclxuICBlZGl0QnV0dG9uQXZhdGFyLCAgXHJcbiAgYWRkQ2FyZCxcclxuICBpbnB1dE5hbWUsXHJcbiAgaW5wdXRBYm91dCxcclxufSBmcm9tIFwiLi4vY29tcG9uZW50cy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cENvbmZpcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cENvbmZpcm1cIjtcclxuXHJcbi8vIGluc3RhbmNlc1xyXG5jb25zdCBlZGl0QXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcG9wdXBUeXBlRWRpdEF2YXRhcik7XHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwb3B1cFR5cGVFZGl0KTtcclxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHBvcHVwVHlwZUFkZCk7XHJcbmNvbnN0IGluZm8gPSBuZXcgVXNlckluZm8oXHJcbiAgXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIFwiLnByb2ZpbGVfX3Rhc2tcIixcclxuICBcIi5wcm9maWxlX19hdmF0YXJcIlxyXG4pO1xyXG5cclxubGV0IHVzZXJJZDtcclxuXHJcblByb21pc2UuYWxsKFthcGkuZ2V0SW5pdGlhbENhcmRzKCksIGFwaS5nZXRVc2VySW5mbygpXSlcclxuLnRoZW4oXHJcbiAgKFtjYXJkRGF0YSwgdXNlckRhdGFdKSA9PiB7XHJcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XHJcbiAgICBjYXJkcy5yZW5kZXJJdGVtcyhjYXJkRGF0YSk7XHJcbiAgICBpbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgZm9ybU5hbWU6IHVzZXJEYXRhLm5hbWUsXHJcbiAgICAgIGZvcm1BYm91dDogdXNlckRhdGEuYWJvdXQsXHJcbiAgICAgIGZvcm1MaW5rOiB1c2VyRGF0YS5hdmF0YXIsXHJcbiAgICB9KTtcclxuICB9XHJcbilcclxuLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKVxyXG5cclxuY29uc3QgY2FyZHMgPSBuZXcgU2VjdGlvbih7cmVuZGVyZXI6IGNyZWF0ZUNhcmR9LCBcIi5lbGVtZW50c1wiKTtcclxuY29uc3QgcG9wdXBCaWdJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF90eXBlX2ltYWdlXCIpO1xyXG5jb25zdCBwb3B1cENvbmZpcm0gPSBuZXcgUG9wdXBDb25maXJtKFwiLnBvcHVwX3R5cGVfZGVsZXRlLWNhcmRcIik7XHJcblxyXG5jb25zdCBwb3B1cEVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXBfdHlwZV9lZGl0XCIsXHJcbiAgc3VibWl0SGFuZGxlcjogKGRhdGEpID0+IHtcclxuICAgIGFwaS5lZGl0UHJvZmlsZShkYXRhKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgICBmb3JtTmFtZTogcmVzLm5hbWUsXHJcbiAgICAgICAgICBmb3JtQWJvdXQ6IHJlcy5hYm91dCxcclxuICAgICAgICAgIGZvcm1MaW5rOiByZXMuYXZhdGFyLFxyXG4gICAgICAgIH0pICAgICAgICBcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKCkgPT4geyAgICAgICAgXHJcbiAgICAgICAgcG9wdXBFZGl0LmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHBvcHVwRWRpdC5yZW5kZXJMb2FkaW5nKGZhbHNlKTsgICAgICAgIFxyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwQ2hhbmdlUHJvZmlsZVBpY3R1cmUgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXBfdHlwZV9lZGl0LWF2YXRhclwiLFxyXG4gIHN1Ym1pdEhhbmRsZXI6IChkYXRhKSA9PiB7ICAgIFxyXG4gICAgYXBpLnVwZGF0ZVByb2ZpbGVJbWFnZShkYXRhLmF2YXRhckltYWdlTGluaylcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgaW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgZm9ybU5hbWU6IHJlcy5uYW1lLFxyXG4gICAgICAgIGZvcm1BYm91dDogcmVzLmFib3V0LFxyXG4gICAgICAgIGZvcm1MaW5rOiByZXMuYXZhdGFyLFxyXG4gICAgICB9KSAgICAgIFxyXG4gICAgfSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgcG9wdXBDaGFuZ2VQcm9maWxlUGljdHVyZS5jbG9zZSgpO1xyXG4gICAgfSkgXHJcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwQ2hhbmdlUHJvZmlsZVBpY3R1cmUucmVuZGVyTG9hZGluZyhmYWxzZSk7ICAgICAgXHJcbiAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgZGF0YSxcclxuICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBCaWdJbWFnZS5vcGVuKGRhdGEpO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVMaWtlQ2xpY2s6IChpZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHdhc0xpa2VkID0gY2FyZC5pc0xpa2VkKCk7XHJcbiAgICAgICAgaWYgKHdhc0xpa2VkKSB7XHJcbiAgICAgICAgICBhcGkuZGVsZXRlTGlrZShpZClcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5saWtlQ2FyZChyZXMubGlrZXMpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYXBpLmFkZExpa2UoaWQpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQubGlrZUNhcmQocmVzLmxpa2VzKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVEZWxldGVDYXJkOiAoaWQpID0+IHtcclxuICAgICAgICBwb3B1cENvbmZpcm0ub3BlbigpO1xyXG4gICAgICAgIHBvcHVwQ29uZmlybS5zZXRBY3Rpb24oKCkgPT4ge1xyXG4gICAgICAgICAgYXBpLmRlbGV0ZUNhcmQoaWQpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQucmVtb3ZlQ2FyZCgpO1xyXG4gICAgICAgICAgICBwb3B1cENvbmZpcm0uY2xvc2UoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgXCIuY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgdXNlcklkXHJcbiAgKTtcclxuICBjYXJkcy5hZGRJdGVtKGNhcmQuZ2V0Q2FyZCgpKTtcclxufVxyXG5cclxuY29uc3QgcG9wdXBBZGQgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXBfdHlwZV9hZGRcIixcclxuICBzdWJtaXRIYW5kbGVyOiAoZGF0YSkgPT4ge1xyXG4gICAgYXBpLmFkZENhcmQoeyBuYW1lOiBkYXRhLmZvcm1UaXRsZSwgbGluazogZGF0YS5mb3JtTGluayB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjcmVhdGVDYXJkKHJlcyk7XHJcbiAgICAgIHBvcHVwQWRkLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKCkgPT4geyAgICAgIFxyXG4gICAgICBwb3B1cEFkZC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcG9wdXBBZGQucmVuZGVyTG9hZGluZyhmYWxzZSk7ICAgICAgXHJcbiAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIGFkZCBjYXJkIGJ1dHRvbiBsaXN0ZW5lciAtIG9wZW4gZm9ybVxyXG5hZGRDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgcG9wdXBBZGQub3BlbigpO1xyXG59KTtcclxuXHJcbi8vIHJlc2V0IGZvcm0tRWRpdCB2YWx1ZVxyXG5mdW5jdGlvbiByZXNldEZvcm1FZGl0VmFsdWUoKSB7XHJcbiAgY29uc3QgZGF0YSA9IGluZm8uZ2V0VXNlckluZm8oKTtcclxuICBpbnB1dE5hbWUudmFsdWUgPSBkYXRhLm5hbWU7XHJcbiAgaW5wdXRBYm91dC52YWx1ZSA9IGRhdGEuam9iO1xyXG59XHJcblxyXG4vLyBlZGl0IGJ1dHRvbiBsaXN0ZW5lciAtIG9wZW4gZm9ybSBhbmQgcmVzZXRcclxuZWRpdEJ1dHRvbkRhdGEuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICByZXNldEZvcm1FZGl0VmFsdWUoKTtcclxuICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBwb3B1cEVkaXQub3BlbigpO1xyXG59KTtcclxuXHJcbi8vIGVkaXQgQnV0dG9uIEF2YXRhciBsaXN0ZW5lciAtIG9wZW4gZm9ybSBhbmQgcmVzZXRcclxuZWRpdEJ1dHRvbkF2YXRhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIHBvcHVwQ2hhbmdlUHJvZmlsZVBpY3R1cmUub3BlbigpO1xyXG59KTtcclxuXHJcbi8vIHJ1biB2YWxpZGF0aW9uXHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5lZGl0QXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyBzZXQgRXZlbnRMaXN0ZW5lcnNcclxucG9wdXBFZGl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwQ2hhbmdlUHJvZmlsZVBpY3R1cmUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBCaWdJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEFkZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cENvbmZpcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTsiXSwibmFtZXMiOlsiY29uZmlnIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwb3B1cFR5cGVFZGl0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicG9wdXBUeXBlQWRkIiwicG9wdXBUeXBlRWRpdEF2YXRhciIsImVkaXRCdXR0b25BdmF0YXIiLCJlZGl0QnV0dG9uRGF0YSIsImFkZENhcmQiLCJpbnB1dE5hbWUiLCJpbnB1dEFib3V0IiwiY29zdHVtRmV0Y2giLCJ1cmwiLCJvcHRpb25zIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1c1RleHQiLCJhcGkiLCJBcGkiLCJiYXNlVXJsIiwidGhpcyIsIl91cmwiLCJfb3B0aW9ucyIsImhlYWRlcnMiLCJkYXRhIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJuYW1lIiwiZm9ybU5hbWUiLCJhYm91dCIsImZvcm1BYm91dCIsImlkIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJ1c2VySWQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJoYW5kbGVEZWxldGVDYXJkIiwiX25hbWUiLCJfbGluayIsImxpbmsiLCJfaWQiLCJfdXNlcklkIiwiX293bmVySWQiLCJvd25lciIsIl9saWtlcyIsImxpa2VzIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJpc0xpa2VkIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwibmV3TGlrZXMiLCJfcmVuZGVyTGlrZXMiLCJzb21lIiwicGVyc29uIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwic3R5bGUiLCJkaXNwbGF5Iiwic3JjIiwiYWx0IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybSIsImlucHV0RWxlbWVudCIsIl9zZXR0aW5ncyIsImVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2lucHV0TGlzdCIsImV2ZXJ5IiwiaW5wdXQiLCJfYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwiZm9yRWFjaCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jYXJkc0NvbnRhaW5lciIsIml0ZW1zIiwiZWxlbWVudCIsImFwcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2dCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVDbGlja1BvcHVwT3ZlcmxheUNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEhhbmRsZXIiLCJfc3VibWl0SGFuZGxlciIsIl9mb3JtIiwiX2lucHV0cyIsIl9mb3JtQnV0dG9uIiwiaXNMb2FkaW5nIiwidmFsdWUiLCJfaW5wdXRWYWx1ZXMiLCJlIiwicHJldmVudERlZmF1bHQiLCJyZW5kZXJMb2FkaW5nIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfam9iIiwiX2F2YXRhciIsImpvYiIsImZvcm1MaW5rIiwiYmFja2dyb3VuZEltYWdlIiwiUG9wdXBXaXRoSW1hZ2UiLCJfaW1hZ2VFbGVtZW50IiwiX2NhcHRpb25FbGVtZW50IiwiUG9wdXBDb25maXJtIiwiYWN0aW9uIiwiZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImFkZENhcmRGb3JtVmFsaWRhdG9yIiwiaW5mbyIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiY2FyZERhdGEiLCJ1c2VyRGF0YSIsImNhcmRzIiwicmVuZGVySXRlbXMiLCJzZXRVc2VySW5mbyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNyZWF0ZUNhcmQiLCJwb3B1cEJpZ0ltYWdlIiwicG9wdXBDb25maXJtIiwicG9wdXBFZGl0IiwiZWRpdFByb2ZpbGUiLCJmaW5hbGx5IiwicG9wdXBDaGFuZ2VQcm9maWxlUGljdHVyZSIsInVwZGF0ZVByb2ZpbGVJbWFnZSIsImF2YXRhckltYWdlTGluayIsImNhcmQiLCJvcGVuIiwiZGVsZXRlTGlrZSIsImxpa2VDYXJkIiwiYWRkTGlrZSIsInNldEFjdGlvbiIsImRlbGV0ZUNhcmQiLCJyZW1vdmVDYXJkIiwiYWRkSXRlbSIsImdldENhcmQiLCJwb3B1cEFkZCIsImZvcm1UaXRsZSIsInJlc2V0VmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJzZXRFdmVudExpc3RlbmVycyJdLCJzb3VyY2VSb290IjoiIn0=